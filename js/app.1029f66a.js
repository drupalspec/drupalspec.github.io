(function(t){function e(e){for(var n,o,c=e[0],l=e[1],u=e[2],f=0,d=[];f<c.length;f++)o=c[f],r[o]&&d.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);s&&s(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,c=1;c<a.length;c++){var l=a[c];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var s=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("64a9"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("main-view")],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isWeatherData?a("div",[a("div",{staticClass:"card"},[a("div",{staticClass:"city"},[t._l(t.localData.icon,function(t,e){return a("span",{key:"icon-"+e},[a("img",{attrs:{src:t}})])}),a("strong",[t._v(t._s(t.localData.currentWeather.name)+", "+t._s(t.localData.currentWeather.sys.country))])],2),a("p",[t._v("Температура: "+t._s(t._f("round")(t.localData.currentWeather.main.temp))+"℃")]),a("p",[t._v("Скорость ветра: "+t._s(t.localData.currentWeather.wind.speed)+" "),a("small",[t._v("м/сек.")])])]),a("div",[a("h2",[t._v("Найти город")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.localData.city,expression:"localData.city"}],attrs:{type:"text",placeholder:"Введите город",required:""},domProps:{value:t.localData.city},on:{click:function(e){t.localData.city=""},input:function(e){e.target.composing||t.$set(t.localData,"city",e.target.value)}}}),a("button",{attrs:{disabled:t.isButtonDisabled},on:{click:t.getWeatherByCity}},[t._v("Найти")])]),a("div",{staticClass:"cities-list"},[a("ol",t._l(t.localData.cities,function(e,n){return a("li",{key:"city-"+n},[a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.selectCity(e)}}},[t._v(" "+t._s(e))]),a("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.removeCity(e)}}},[t._v("×")])])}),0)])]):t._e()},c=[],l=a("f499"),u=a.n(l),s=a("a4bb"),f=a.n(s),d="https://api.openweathermap.org/data/2.5/weather",p="56e16970e1331ae7ae3273cd28e53488",h="Kiev",v={data:function(){return{localData:{latitude:void 0,longitude:void 0,currentWeather:{},icon:void 0,city:"",cities:[]}}},created:function(){this.initMethod()},computed:{isButtonDisabled:function(){return""==this.localData.city},isWeatherData:function(){return f()(this.localData.currentWeather).length>0}},methods:{initMethod:function(){if(localStorage.getItem("weatherData"))this.localData=JSON.parse(localStorage.getItem("weatherData"));else{if(navigator.geolocation)return navigator.geolocation.getCurrentPosition(this.recordUserPosition,this.errorHandler);alert("Your browser doesn't support geolocation.")}},recordUserPosition:function(t){this.localData.latitude=t.coords.latitude,this.localData.longitude=t.coords.longitude,this.getCurrentWeather()},getCurrentWeather:function(){this.request("".concat(d,"?lat=").concat(this.localData.latitude,"&lon=").concat(this.localData.longitude,"&appid=").concat(p,"&units=metric&lang=ru"))},getWeatherByCity:function(t){this.request("".concat(d,"?q=").concat(this.localData.city,"&appid=").concat(p,"&units=metric&lang=ru"),t)},addCityToList:function(t){if(-1==this.localData.cities.indexOf(t))return this.localData.cities.push(t)},selectCity:function(t){this.localData.city=t,this.getWeatherByCity(t)},removeCity:function(t){return this.localData.cities=this.localData.cities.filter(function(e){return e!==t})},errorHandler:function(t){t.PERMISSION_DENIED&&(this.localData.city=h,this.getWeatherByCity())},request:function(t,e){var a=this;return fetch(t).then(function(t){404!=t.status?t.json().then(function(t){void 0!==e&&a.addCityToList(a.localData.city),a.localData.currentWeather=t,a.localData.icon=t.weather.map(function(t){return"http://openweathermap.org/img/w/".concat(t.icon,".png")})}):alert(t.statusText)}).catch(function(t){alert("Server Error",t.message)})}},filters:{round:function(t){return Math.round(t)}},watch:{localData:{handler:function(){localStorage.setItem("weatherData",u()(this.localData))},deep:!0}}},y=v,g=(a("fc1c"),a("2877")),D=Object(g["a"])(y,o,c,!1,null,null,null);D.options.__file="MainView.vue";var m=D.exports,_={name:"app",components:{mainView:m}},b=_,w=(a("034f"),Object(g["a"])(b,r,i,!1,null,null,null));w.options.__file="App.vue";var C=w.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(C)}}).$mount("#app")},"64a9":function(t,e,a){},"6f81":function(t,e,a){},fc1c:function(t,e,a){"use strict";var n=a("6f81"),r=a.n(n);r.a}});
//# sourceMappingURL=app.1029f66a.js.map